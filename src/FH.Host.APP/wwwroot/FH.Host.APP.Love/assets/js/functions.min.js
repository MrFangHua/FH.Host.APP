var $window=$(window),gardenCtx,gardenCanvas,$garden,garden,clientWidth=$(window).width(),clientHeight=$(window).height();function getHeartPoint(angle){var t=angle/Math.PI,x=16*Math.pow(Math.sin(t),3)*19.5,y=-20*(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t));return new Array(offsetX+x,offsetY+y)}function startHeartAnimation(){var interval=50,angle=10,heart=new Array,animationTimer=setInterval((function(){for(var bloom=getHeartPoint(angle),draw=!0,i=0;i<heart.length;i++){var p=heart[i],distance;if(Math.sqrt(Math.pow(p[0]-bloom[0],2)+Math.pow(p[1]-bloom[1],2))<1.3*Garden.options.bloomRadius.max){draw=!1;break}}draw&&(heart.push(bloom),garden.createRandomBloom(bloom[0],bloom[1])),angle>=30?(clearInterval(animationTimer),showMessages()):angle+=.2}),50)}function timeElapse(date){var current=Date(),seconds=(Date.parse(current)-Date.parse(date))/1e3,days=Math.floor(seconds/86400);seconds%=86400;var hours=Math.floor(seconds/3600);hours<10&&(hours="0"+hours),seconds%=3600;var minutes=Math.floor(seconds/60);minutes<10&&(minutes="0"+minutes),(seconds%=60)<10&&(seconds="0"+seconds);var result='<span class="digit">'+days+'</span> days <span class="digit">'+hours+'</span> hours <span class="digit">'+minutes+'</span> minutes <span class="digit">'+seconds+"</span> seconds";$("#elapseClock").html(result)}function showMessages(){adjustWordsPosition(),$("#messages").fadeIn(5e3,(function(){showLoveU()}))}function adjustWordsPosition(){$("#words").css("position","absolute"),$("#words").css("top",$("#garden").position().top+195),$("#words").css("left",$("#garden").position().left+70)}function adjustCodePosition(){$("#code").css("margin-top",($("#garden").height()-$("#code").height())/2)}function showLoveU(){$("#loveu").fadeIn(3e3)}$((function(){$loveHeart=$("#loveHeart");var offsetX=$loveHeart.width()/2,offsetY=$loveHeart.height()/2-55;$garden=$("#garden"),(gardenCanvas=$garden[0]).width=$("#loveHeart").width(),gardenCanvas.height=$("#loveHeart").height(),(gardenCtx=gardenCanvas.getContext("2d")).globalCompositeOperation="lighter",garden=new Garden(gardenCtx,gardenCanvas),$("#content").css("width",$loveHeart.width()+$("#code").width()),$("#content").css("height",Math.max($loveHeart.height(),$("#code").height())),$("#content").css("margin-top",Math.max(($window.height()-$("#content").height())/2,10)),$("#content").css("margin-left",Math.max(($window.width()-$("#content").width())/2,10)),setInterval((function(){garden.render()}),Garden.options.growSpeed)})),$(window).resize((function(){var newWidth=$(window).width(),newHeight=$(window).height();newWidth!=clientWidth&&newHeight!=clientHeight&&location.replace(location)})),function($){$.fn.typewriter=function(){return this.each((function(){var $ele=$(this),str=$ele.html(),progress=0;$ele.html("");var timer=setInterval((function(){var current;"<"==str.substr(progress,1)?progress=str.indexOf(">",progress)+1:progress++,$ele.html(str.substring(0,progress)+(1&progress?"_":"")),progress>=str.length&&clearInterval(timer)}),75)})),this}}(jQuery);